# Производительность

## Узкие места
1. Σ по зарядов в каждом пикселе.
2. Многократный пересчёт при drag.
3. Линии с большим числом seeds.

## Метрики (целевые)
| Показатель | Цель |
|------------|------|
| FPS (≤32 charges @ 1080p) | 60 |
| Обновление после перемещения заряда | < 33ms |
| Генерация 128 линий (200 шагов) | < 16ms |

## Техники оптимизации
| Задача | Метод |
|--------|-------|
| Потенциал | Pre-pass в текстуру |
| Линии | Кэш поля + билинейная интерполяция |
| Эквипотенциалы | Порог на сжатом Vc |
| Палитры | 1D-текстура |
| Drag | Пониженное разрешение во время перемещения |

## WebGPU перспектива
- Compute pipeline: параллельный подсчёт V.
- Возможность нескольких буферов (double-buffering) для плавности.

## Память (оценка)
| Ресурс | Пример |
|--------|--------|
| Заряды (256 * vec4) | ~4 KB |
| Линии (128 * 256 * vec2) | ~128 KB |
| Текстура поля 1024² R32F | ~4 MB |

## Профилирование
- Счётчик кадров (requestAnimationFrame diff).
- Инструменты браузера (Performance, GPU).
- Логирование времени обновления массива зарядов.

---
