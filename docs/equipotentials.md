# Эквипотенциальные линии

## Смысл
Линии V = const. В учебной визуализации подчёркивают связь плотности линий и величины поля.

## Подходы

### Пороговый (несколько уровней)
Для каждого уровня V_k:
```
if (|V - V_k| < δ) → лайн.
```
Недостаток: δ трудно подобрать для всех областей.

### Периодический
```
scaled = (V - Vmin) / dV  
band = abs(fract(scaled) - 0.5)  
mask = step(band, width)
```

### Marching Squares
1. Семплировать V на сетку NxM.
2. Для каждого cell определить индекс (4 бита).
3. Вычислить пересечения рёбер, собрать сегменты.
4. Постпроцесс (слияние, упорядочивание) — получение полилиний.

### Антиалиасинг
```
float g = abs(V - V_k)/fwidth(V);
float alpha = 1.0 - smoothstep(0.0, 1.0, g);
```

## Выбор dV
- Линейный (равные интервалы).
- Логарифмический (если диапазон широкий).
- Авто: анализ гистограммы V.

## Хранение
Массив isoLevels[] (float) + параметры визуализации:
- baseColor
- isoColor
- width (толщина)

## Будущий GPU (WebGPU)
- Compute pass: marching squares внутри compute → запись вершин в storage buffer.
- Render pass: индиректный отрисовочный вызов.

---
