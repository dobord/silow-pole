# silow-pole

Электростатическое поле от точечных зарядов на шейдерах (Electrostatic Field Visualizer)

Используются: HTML5, JavaScript, WebGL (OpenGL ES Shading Language 2.0)

Демо: http://dobord.github.io/silow-pole/silow-pole.html

## Поддерживаемые платформы (исторически протестировано)

Рекомендуемая конфигурация:
- FireFox Windows 7 (v25.0)
- FireFox Android 4.0 (v24.0)
- Chromium Ubuntu 13.10 (v28.0.1500.71)

Минимальные требования:
- FireFox Windows 7 (v23.01)
- Google Chrome Windows 7 (v29.0.1547.62)
- Opera Windows 7 (v16.0.1196.62)
- FireFox Android 4.0 (v23.0)

## Цели проекта

- Интерактивная визуализация потенциала и линий напряженности электрического поля от набора точечных зарядов.
- Демонстрация учебных принципов: суперпозиция, направление силовых линий, симметрии, эквипотенциалы.
- GPU-ускорение — вычисление потенциала в каждом фрагменте экрана через шейдер.
- (Ветка `feature/webgpu`) — подготовка к миграции с WebGL на WebGPU (архитектурные идеи заложены, текущее состояние опирается на WebGL-код).

## Основные возможности

- Добавление / удаление / редактирование / перемещение точечных зарядов.
- Отображение/скрытие зарядов и линий напряженности.
- Псевдоцветовое отображение распределения скалярного потенциала.
- (Опционально / планируется) эквипотенциальные линии (уровневые кривые потенциала).
- Полноэкранный проход (fullscreen quad) для вычисления V(x,y) в шейдере.
- Расширяемая архитектура для перехода к compute/рaster pipeline WebGPU.

## Физическая модель

Потенциал:
V(r) = k Σᵢ qᵢ / |r - rᵢ|  
Напряжённость:
E(r) = -∇V(r) = k Σᵢ qᵢ (r - rᵢ) / |r - rᵢ|³

Для визуализации используется численная стабилизация (малое ε в знаменателях и/или логарифмическая компрессия).

## Структура исходных данных

- `map.mQ`: список зарядов (`vec4(x, y, q, aux)`).
- `map.mSZ`: размер холста.
- Флаги `map.is_show_q`, `map.is_show_line`.
- Выбор активного заряда `map.sel_q`.

## Документация

Подробности вынесены в каталог `docs/`:

| Файл | Содержание |
|------|------------|
| architecture.md | Общая архитектура и потоки данных |
| shaders.md | Структура и предполагаемая логика шейдеров |
| field-potential.md | Формулы и вычисление потенциала |
| field-lines.md | Алгоритмы построения силовых линий |
| equipotentials.md | Эквипотенциальные линии: концепт и реализация |
| ui-interactions.md | Сценарии UI и модели состояний |
| algorithms.md | Сводка ключевых алгоритмов и псевдокод |
| performance.md | Ограничения и оптимизации |
| roadmap.md | Возможные направления развития (включая WebGPU) |
| glossary.md | Термины |

## Быстрый старт (концептуально)

1. Открыть страницу `silow-pole.html`.
2. Убедиться, что браузер поддерживает WebGL.
3. Использовать элементы UI для добавления/изменения зарядов.
4. Наблюдать изменение карты потенциала и (если включено) линий.

## Лицензия и замечания

Отладочные и утилитарные файлы основаны на стандартных WebGL helper-библиотеках (Google / Khronos).  
Проект предназначен для учебно-демонстрационных целей.  
Переход к WebGPU предполагает реорганизацию буферов и вычислительных проходов.

## Краткий план развития

- Выделение общего слоя для абстракции GPU (WebGL → WebGPU).
- Хранение зарядов в структурированных буферах (SSBO/storage buffer).
- Compute-проход: предрасчёт поля в текстуру.
- Улучшение отрисовки эквипотенциальных линий (marching squares + сглаживание).
- Адаптивные шаги интегрирования для силовых линий (RK4).
- UI для выбора палитр и нормализации динамического диапазона.

## Контрибьюции

PR и предложения приветствуются.  
Рекомендация: при добавлении новых визуальных слоёв — расширять документацию в соответствующих файлах `docs/`.